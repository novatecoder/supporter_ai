# [SDS] 서포터 AI (Supporter AI) 상세 설계서

## 1. 시스템 아키텍처 (Incremental Ego Architecture)

본 시스템은 기본적인 채팅 인터페이스에서 시작하여, 감정(Emotion)과 이성(Reason)이 분리된 복합 뇌 구조로 진화하는 것을 목표로 합니다.

### 1.1 상태 관리 및 분석 흐름

* **Decoupled Logic**: 입력이 들어오면 **감정 노드**가 먼저 반응하여 AI의 내부 상태를 변화시키고, **뇌 노드**가 그 상태를 바탕으로 말투와 내용을 결정합니다.
* **Hybrid Memory**: Redis(단기/감정), PostgreSQL(인격/성장), Neo4j(관계), Vector DB(경험)를 단계적으로 결합합니다.

## 2. 데이터베이스 및 심리 모델 설계

### 2.1 4단계 레이어 메모리 (Redis + SQL + Graph + Vector)

1. **Redis (Short-term)**: 현재 대화의 기분(Mood), '킹받음' 지수, 최근 대화 맥락.
2. **PostgreSQL (Persona)**:
* **Big5**: 외향성, 친화성 등 기본 성격 수치.
* **교류분석(TA)**: 부모(P), 성인(A), 아이(C) 자아 상태 수치.
* **다크 트라이어드**: 나르시시즘, 마키아벨리즘(자기주장 및 독설 수위).


3. **Neo4j (Knowledge Graph)**: 사용자 주변 인물, 선호도, 싫어하는 것(장난 소재).
4. **Vector DB (Episodic)**: 과거의 중요한 사건 및 학습된 지식.

## 3. 멀티 에이전트 노드 구성 (LangGraph)

| 노드(Node) | 역할 및 세부 로직 |
| --- | --- |
| **Input Node** | 메시지 수신 및 기본 필터링. |
| **Emotional Node** | **(감정 전용)** 실시간 기분 수치 업데이트 및 '자기주장' 발동 여부 결정. |
| **Brain Node** | **(이성/표현)** 결정된 감정과 성격 수치(Big5/TA 등)를 조합해 최종 답변 생성. |
| **Sensory Tools** | **(감각)** 구글 검색, 시스템 모니터링, 비전 분석 기능. |
| **Reflection Node** | **(성찰)** 대화 후 사용자 반응을 분석해 인격 수치 미세 조정(아기처럼 학습). |

---
